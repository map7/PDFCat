<h1>Listing categories</h1>



<table id=listing>
  <tr id=header>
    <th id="FKey">FKey<% @no = 0 %></th>

    <% for column in Category.content_columns %>
      <th><%= column.human_name %></th>
    <% end %>
    <th>Documents</th>

  </tr>
  
<% for category in @categories %>
  <tr id=listitem>
    <td id="FKey"><%= @no = @no +1 %></td>
    <% for column in Category.content_columns %>
      <td><%=h category.send(column.name) %></td>
    <% end %>

    <td><%=h category.pdfs.count %></td>

    <td><%= link_to 'Show', {:action => 'show', :id => category}, 
              :id => "show", :method => :get %></td>
    <td><%= link_to 'Edit', {:action => 'edit', :id => category}, 
              :id => "edit", :method => :get %></td>
    <td><%= link_to 'Delete', { :action => 'destroy', :id => category }, 
              :id => "del", :confirm => "You are going to delete a category which contains #{category.pdfs.count} document(s)\n\n Are you sure?", :method => :delete %></td>

  </tr>
<% end %>
</table>

<!-- Page jump navigation -->
<%= will_paginate @categories %>

<%= link_to '<b>A</b>dd New category', :action => 'new' %>

<script>setup('listing');</script>
