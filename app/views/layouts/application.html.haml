!!!
%html
	%head
		%title
			= SITE_NAME
			= controller.action_name

		= stylesheet_link_tag 'application', 'pdfcat'
		= javascript_include_tag 'prototype', 'select_mode', :defaults

%body
	= shortcut_function '\x1B', "hide_all();"
	= shortcut_fnkey '1', "#{request.env['SCRIPT_NAME']}/new" 
	= shortcut_fnkey '2', "#{request.env['SCRIPT_NAME']}/pdfs" 
	= shortcut_fnkey '3', "#{request.env['SCRIPT_NAME']}/clients" 
	= shortcut_fnkey '4', "#{request.env['SCRIPT_NAME']}/categories" 
	= shortcut_fnkey '7', "#{request.env['SCRIPT_NAME']}/missing" 
	= shortcut_fnkey '8', "#{request.env['SCRIPT_NAME']}/users" 
	= shortcut_fnkey '9', "#{request.env['SCRIPT_NAME']}/firms" 
	= shortcut_fnkey '10', "#{request.env['SCRIPT_NAME']}/logout" 

	= shortcut_function '?', "Element.toggle('help');"
	= shortcut_function 'h', "Element.toggle('help');"  

	= shortcut_function '1', "highlight(1);$('info').show();"
	= shortcut_function '2', "highlight(2);$('info').show();" 
	= shortcut_function '3', "highlight(3);$('info').show();" 
	= shortcut_function '4', "highlight(4);$('info').show();" 
	= shortcut_function '5', "highlight(5);$('info').show();" 
	= shortcut_function '6', "highlight(6);$('info').show();" 
	= shortcut_function '7', "highlight(7);$('info').show();" 
	= shortcut_function '8', "highlight(8);$('info').show();" 
	= shortcut_function '9', "highlight(9);$('info').show();" 
	= shortcut_function '0', "highlight(10);$('info').show();"

	= shortcut_function 'v', "hide_all();runSelectedName('view');" 

	= shortcut_function 'm', "runSelectedName('email');"

	= shortcut_function 's', "runSelectedName('show');" 
	= shortcut_function '/', "runSelectedName('show');" 

	= shortcut_function 'e', "runSelectedName('edit');" 
	= shortcut_function '*', "runSelectedName('edit');" 

	= shortcut_function 'd', "runSelectedName('del');" 
	= shortcut_function '-', "runSelectedName('del');" 

	= shortcut_function 't', "runSelectedAjaxName('tagajax');$('info').hide();" 

	// General shortcuts 
	= shortcut 'a', "#{request.env['SCRIPT_NAME']}/" + controller.controller_name + "/new"
	= shortcut '+', "#{request.env['SCRIPT_NAME']}/" + controller.controller_name + "/new"
	= shortcut_ctrl 'b', "#{request.env['SCRIPT_NAME']}/" + controller.controller_name

	#contentBox
		#contentInner= yield

	#help(style="display:none")
		%h2 HELP - Shortcut Keys
		%p If an item is highlighted in red it means the file is missing.  This is shown after a relink has been done so you will either have to rescan this item or find a backup of the file.

		%table
			%th Page Navigation
			%th Key
			%tr
			%td New Page
			%td F1
			%tr
			%td Pdfs Page
			%td F2
			%tr
			%td Client Page
			%td F3
			%tr
			%td Category Page
			%td F4
			%tr
			%td Users
			%td F8
			%tr
			%td Firms
			%td F9
			%tr
			%td Logout
			%td F10

		%table
			%th Listing Navigation
			%th Key
			%tr
			%td Search
			%td CTRL+s

		%table
			%th Item Management
			%th Key
			%tr
			%td Select item
			%td 0-9
			%tr
			%td Add new item
			%td a
			%tr
			%td View pdf
			%td v
			%tr
			%td Show item
			%td s
			%tr
			%td Edit item
			%td e
			%tr
			%td Delete item
			%td d
			%tr
			%td Email item
			%td m

		#info(style='display:none')
			.pad1

			#key1(style="float:right")
			%table
			%th Function
			%th key
			%tr
			%td Show
			%td s or /
			%tr
			%td Edit
			%td e or *
			%tr
			%td Delete
			%td d or -

			#mode Select Mode

		#mode
		#modeKeys

	.nav
		.pad1
		- if current_user
			= link_to '<div class="menuitem">1-New</div>', :controller => 'new' 
			= link_to '<div class="menuitem">2-Pdf</div>', :controller => 'pdfs' 
			= link_to '<div class="menuitem">3-Client</div>', :controller => 'clients' 
			= link_to '<div class="menuitem">4-Category</div>', :controller => 'categories' 

		%a(href="http://paistram.lan/manual")
			.menuitem 5-Manual

		- if current_user.is_admin?
			= link_to '<div class="menuitem">7-Missing</div>', :controller => 'missing' 
			= link_to '<div class="menuitem">8-Users</div>', :controller => 'users' 
			= link_to '<div class="menuitem">9-Firms</div>', :controller => 'firms' 

		= link_to '<div class="menuitem">0-Logout</div>', :controller => 'sessions', :action => 'destroy'
		= link_to_function '<div class="menuitem">?-Help</div>', "Element.toggle('help');" 

	#flash= flash[:notice]

	#foot
		.pad1
		#footerLeft
			#footerAPP PDFCat #{PDFCAT_VERSION}
			
		#footerRight
			- unless current_user.nil?
				Logged in as: #{current_user.login unless current_user.nil?},
				Firm: #{current_firm.name unless current_firm.nil?}

	/ Adding fancy tinting, which also disables the background (good thing) and centers the message box 
	#background_tint(style='display:none')

	#background_center(style='display:none')
		%table
			%td
				#wait(style='display:none')
					%table
						%td
							#inforelink(style='display:none') Relinking pdf file in database
							#infoemail(style='display:none') Sending email, Please wait...
						%td= image_tag 'indicator.gif', :id => 'indicator'

